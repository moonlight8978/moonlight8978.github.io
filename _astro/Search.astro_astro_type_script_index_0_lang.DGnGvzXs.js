const p="modulepreload",g=function(c){return"/"+c},f={},y=function(d,e,t){let i=Promise.resolve();if(e&&e.length>0){let r=function(o){return Promise.all(o.map(l=>Promise.resolve(l).then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),u=n?.nonce||n?.getAttribute("nonce");i=r(e.map(o=>{if(o=g(o),o in f)return;f[o]=!0;const l=o.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const s=document.createElement("link");if(s.rel=l?"stylesheet":p,l||(s.as="script"),s.crossOrigin="",s.href=o,u&&s.setAttribute("nonce",u),document.head.appendChild(s),l)return new Promise((m,w)=>{s.addEventListener("load",m),s.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${o}`)))})}))}function h(r){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=r,window.dispatchEvent(n),!n.defaultPrevented)throw r}return i.then(r=>{for(const n of r||[])n.status==="rejected"&&h(n.reason);return d().catch(h)})};class b extends HTMLElement{constructor(){super(),this.openModal=e=>{if(!this.#e){console.warn("Dialog not found");return}document.querySelector("body")?.classList.add("overflow-hidden"),this.#e.showModal(),this.querySelector("input")?.focus(),e?.stopPropagation(),window.addEventListener("click",this.onWindowClick,{signal:this.#o.signal})},this.closeModal=()=>{document.querySelector("body")?.classList.remove("overflow-hidden"),this.#e?.close()},this.onWindowClick=e=>{("href"in(e.target||{})||document.body.contains(e.target)&&!this.#s?.contains(e.target))&&this.closeModal()},this.onWindowKeydown=e=>{if(!this.#e){console.warn("Dialog not found");return}(e.metaKey===!0||e.ctrlKey===!0)&&e.key==="k"&&(this.#e.open?this.closeModal():this.openModal(),e.preventDefault())},this.#t=this.querySelector("button[data-open-modal]"),this.#n=this.querySelector("button[data-close-modal]"),this.#e=this.querySelector("dialog"),this.#s=this.querySelector(".dialog-frame"),this.#o=new AbortController,this.trailingSlashes=this.dataset.trailingSlashes==="true",this.stripTrailingSlash=e=>e.replace(/(.)\/(#.*)?$/,"$1$2"),this.formatURL=this.trailingSlashes?e=>e:this.stripTrailingSlash,this.#t?(this.#t.addEventListener("click",this.openModal),this.#t.disabled=!1):console.warn("Search button not found"),this.#n?this.#n.addEventListener("click",this.closeModal):console.warn("Close button not found"),this.#e?this.#e.addEventListener("close",()=>{window.removeEventListener("click",this.onWindowClick)}):console.warn("Dialog not found"),(window.requestIdleCallback||(e=>setTimeout(e,1)))(async()=>{const{PagefindUI:e}=await y(async()=>{const{PagefindUI:t}=await import("./ui-core.CK22aAi3.js");return{PagefindUI:t}},[]);new e({baseUrl:"/",bundlePath:"/".replace(/\/$/,"")+"/pagefind/",element:"#pagefind-search",showImages:!1,showSubResults:!0,processResult:t=>(t.url=this.formatURL(t.url),t.sub_results=t.sub_results.map(i=>(i.url=this.formatURL(i.url),i)),t)})})}#n;#e;#s;#t;#o;connectedCallback(){window.addEventListener("keydown",this.onWindowKeydown,{signal:this.#o.signal})}disconnectedCallback(){this.#o.abort()}}customElements.define("site-search",b);export{y as _};
